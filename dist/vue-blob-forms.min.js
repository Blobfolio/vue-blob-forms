!function(){const BlobFormsVue={install:function(Vue){const regexEmail=new RegExp(/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/),gravatar="https://www.gravatar.com/avatar/";function _validateForm(el,touch){if(void 0===el.__blobForm__)return console.warn("Invalid vue-blob-form."),!1;if(el.__blobForm__.$lock)return!1;el.__blobForm__.$lock=!0,touch=!!touch,el.__blobForm__.errors={};const fields=_getFields.call(this,el);for(let i=0;i<fields.length;++i)_validateField.call(this,el,fields[i],touch);el.__blobForm__.$lock=!1;let vue=this;return Vue.nextTick(function(){_updateFormClasses.call(vue,el)}),!0}function _validateField(form,field,touch){_isForm(form);const fieldName=_isField(field);if(field.__blobForm__.$lock)return!1;field.__blobForm__.$lock=!0,touch=!!touch;let fieldValue=field.value||"",validity=!1;touch&&!field.__blobForm__.touched&&(field.__blobForm__.touched=!0);let changed=_checksum(fieldValue)!==field.__blobForm__.originalValue;changed!==field.__blobForm__.changed&&(field.__blobForm__.changed=changed);let valid=!1;if(_resetValidity(field),void 0===field.willValidate||field.checkValidity()?valid=!0:field.__blobForm__.touched||(validity=field.validity).valueMissing&&(valid=!0,_resetValidity(field)),fieldValue.length&&valid&&"email"===field.getAttribute("type")&&((valid=!!regexEmail.test(fieldValue))||field.setCustomValidity("Please enter a complete email address.")),"blobPhone"in window&&fieldValue.length&&valid&&"tel"===field.getAttribute("type")){const lastValue=field.dataset.blobPhoneValue||"",lastValid=parseInt(field.dataset.blobPhoneValid,10)||0;if(lastValue!==fieldValue){let country=(field.dataset.country||"").toUpperCase()||"US";2!==country.length&&(country="US"),!1!==blobPhone.parse(fieldValue,country)?(field.setAttribute("data-blob-phone-value",fieldValue),field.setAttribute("data-blob-phone-valid",1)):(field.setAttribute("data-blob-phone-value",fieldValue),field.setAttribute("data-blob-phone-valid",0),valid=!1)}else valid=1===lastValid;valid||field.setCustomValidity("Please enter a valid phone number.")}if(valid){const fieldCallback=field.dataset.validationCallback||field.getAttribute("validation-callback")||!1;if(fieldCallback&&"function"==typeof this[fieldCallback]){let callbackResponse=this[fieldCallback](fieldValue);!0!==callbackResponse&&(valid=!1,"string"==typeof callbackResponse&&callbackResponse.length?field.setCustomValidity(callbackResponse):field.setCustomValidity("This input is not valid."))}}if(valid?(_resetValidity(field),void 0!==form.__blobForm__.errors[fieldName]&&delete form.__blobForm__.errors[fieldName]):form.__blobForm__.errors[fieldName]=field.validationMessage,valid!==field.__blobForm__.valid&&(field.__blobForm__.valid=valid),_toggleClasses(field,["is-valid","is:valid"],["is-invalid","is:invalid"],field.__blobForm__.valid),_toggleClasses(field,["is-touched","is:touched"],[],field.__blobForm__.touched),_toggleClasses(field,["is-changed","is:changed"],[],field.__blobForm__.changed),field.__blobForm__.$lock=!1,!form.__blobForm__.$lock&&(field.__blobForm__.valid!==form.__blobForm__.valid||field.__blobForm__.touched!==form.__blobForm__.touched||field.__blobForm__.changed!==form.__blobForm__.changed)){let vue=this;Vue.nextTick(function(){_updateFormClasses.call(vue,form)})}return valid}function _resetValidity(el){try{el.checkValidity(),el.setCustomValidity("")}catch(Ex){return!1}}function _updateFormClasses(el){if(!_isForm(el))return!1;let changed=!1,valid=!Object.keys(el.__blobForm__.errors).length,touched=!1;const fields=_getFields.call(this,el,!1);for(let i=0;i<fields.length&&(!changed&&fields[i].__blobForm__.changed&&(changed=!0),valid&&!fields[i].__blobForm__.valid&&(valid=!1),!touched&&fields[i].__blobForm__.touched&&(touched=!0),!changed||valid||!touched);++i);valid!==el.__blobForm__.valid&&(el.__blobForm__.valid=valid),changed!==el.__blobForm__.changed&&(el.__blobForm__.changed=changed),touched!==el.__blobForm__.touched&&(el.__blobForm__.touched=touched),_toggleClasses(el,["is-valid","is:valid"],["is-invalid","is:invalid"],valid),_toggleClasses(el,["is-touched","is:touched"],[],touched),_toggleClasses(el,["is-changed","is:changed"],[],changed),this.$forceUpdate()}function _isForm(el){return!!(el&&el.nodeName&&"FORM"===el.nodeName&&el.getAttribute("name"))&&el.getAttribute("name")}function _isField(el){return!(!el||!el.nodeName||"INPUT"!==el.nodeName&&"SELECT"!==el.nodeName&&"TEXTAREA"!==el.nodeName||el.disabled||!el.getAttribute("name")||"button"===el.getAttribute("type")||"submit"===el.getAttribute("type")||"reset"===el.getAttribute("type"))&&(!el.hasAttribute("novalidate-field")&&!el.hasAttribute("data-novalidate-field")&&el.getAttribute("name"))}function _getFormByName(name){if(!name)return!1;const el=document.querySelector('form[name="'+name+'"]');return!(!el||!_isForm(el)||void 0===el.__blobForm__)&&el}function _getFormFieldByName(el,name){const fields=_getFields.call(this,el);if(!1!==fields)for(let i=0;i<fields.length;++i){if((fields[i].getAttribute("name")||"")===name)return fields[i]}return!1}function _getFields(el){if(!1===_isForm(el))return!1;let out=[],vue=this,changed=!1,fieldNames=[];for(let i=0;i<el.elements.length;++i){let fieldName=_isField(el.elements[i]);fieldName&&(void 0===el.elements[i].__blobForm__&&(el.elements[i].__blobForm__={originalValue:_checksum(el.elements[i].value||""),changed:!1,touched:!1,valid:!0,$lock:!1},el.elements[i].addEventListener("blur",function(e){Vue.nextTick(function(){_validateField.call(vue,el,e.target,!0)})}),changed=!0),fieldNames.push(fieldName),out.push(el.elements[i]))}const fieldLength=out.length;if(el.__blobForm__.fieldCount!==fieldLength){if(el.__blobForm__.fieldCount>fieldLength&&!el.__blobForm__.$lock)if(fieldLength){const errorKeys=Object.keys(el.__blobForm__.errors);for(let i=0;i<errorKeys.length;++i)-1===fieldNames.indexOf(errorKeys[i])&&delete el.__blobForm__.errors[errorKeys[i]]}else el.__blobForm__.errors={};el.__blobForm__.fieldCount=out.length,changed=!0}return changed&&(this.$forceUpdate(),Vue.nextTick(function(){_updateFormClasses.call(vue,el)})),!!out.length&&out}function _toggleClasses(el,good,bad,test){if(!el.getAttribute("name"))return!1;if("string"==typeof good&&(good=good.split(" ")),!Array.isArray(good))return!1;if("string"==typeof bad&&(bad=bad.split(" ")),!Array.isArray(bad))return!1;let hasClass;test=!!test;for(let i=0;i<good.length;++i)good[i]&&(hasClass=el.classList.contains(good[i]),test&&!hasClass?el.classList.add(good[i]):!test&&hasClass&&el.classList.remove(good[i]));for(let i=0;i<bad.length;++i)bad[i]&&(hasClass=el.classList.contains(bad[i]),test||hasClass?test&&hasClass&&el.classList.remove(bad[i]):el.classList.add(bad[i]));return!0}function _checksum(value){if("object"==typeof value)try{value=JSON.stringify(value)}catch(Ex){return 0}else try{value+=""}catch(Ex){return 0}let hash=0;const strlen=value.length;for(let i=0;i<strlen;++i){hash=(hash<<5)-hash+value.charCodeAt(i),hash&=hash}return hash}function _md5(str){const md5cycle=function(x,k){var a=x[0],b=x[1],c=x[2],d=x[3];a=ff(a,b,c,d,k[0],7,-680876936),d=ff(d,a,b,c,k[1],12,-389564586),c=ff(c,d,a,b,k[2],17,606105819),b=ff(b,c,d,a,k[3],22,-1044525330),a=ff(a,b,c,d,k[4],7,-176418897),d=ff(d,a,b,c,k[5],12,1200080426),c=ff(c,d,a,b,k[6],17,-1473231341),b=ff(b,c,d,a,k[7],22,-45705983),a=ff(a,b,c,d,k[8],7,1770035416),d=ff(d,a,b,c,k[9],12,-1958414417),c=ff(c,d,a,b,k[10],17,-42063),b=ff(b,c,d,a,k[11],22,-1990404162),a=ff(a,b,c,d,k[12],7,1804603682),d=ff(d,a,b,c,k[13],12,-40341101),c=ff(c,d,a,b,k[14],17,-1502002290),b=ff(b,c,d,a,k[15],22,1236535329),a=gg(a,b,c,d,k[1],5,-165796510),d=gg(d,a,b,c,k[6],9,-1069501632),c=gg(c,d,a,b,k[11],14,643717713),b=gg(b,c,d,a,k[0],20,-373897302),a=gg(a,b,c,d,k[5],5,-701558691),d=gg(d,a,b,c,k[10],9,38016083),c=gg(c,d,a,b,k[15],14,-660478335),b=gg(b,c,d,a,k[4],20,-405537848),a=gg(a,b,c,d,k[9],5,568446438),d=gg(d,a,b,c,k[14],9,-1019803690),c=gg(c,d,a,b,k[3],14,-187363961),b=gg(b,c,d,a,k[8],20,1163531501),a=gg(a,b,c,d,k[13],5,-1444681467),d=gg(d,a,b,c,k[2],9,-51403784),c=gg(c,d,a,b,k[7],14,1735328473),b=gg(b,c,d,a,k[12],20,-1926607734),a=hh(a,b,c,d,k[5],4,-378558),d=hh(d,a,b,c,k[8],11,-2022574463),c=hh(c,d,a,b,k[11],16,1839030562),b=hh(b,c,d,a,k[14],23,-35309556),a=hh(a,b,c,d,k[1],4,-1530992060),d=hh(d,a,b,c,k[4],11,1272893353),c=hh(c,d,a,b,k[7],16,-155497632),b=hh(b,c,d,a,k[10],23,-1094730640),a=hh(a,b,c,d,k[13],4,681279174),d=hh(d,a,b,c,k[0],11,-358537222),c=hh(c,d,a,b,k[3],16,-722521979),b=hh(b,c,d,a,k[6],23,76029189),a=hh(a,b,c,d,k[9],4,-640364487),d=hh(d,a,b,c,k[12],11,-421815835),c=hh(c,d,a,b,k[15],16,530742520),b=hh(b,c,d,a,k[2],23,-995338651),a=ii(a,b,c,d,k[0],6,-198630844),d=ii(d,a,b,c,k[7],10,1126891415),c=ii(c,d,a,b,k[14],15,-1416354905),b=ii(b,c,d,a,k[5],21,-57434055),a=ii(a,b,c,d,k[12],6,1700485571),d=ii(d,a,b,c,k[3],10,-1894986606),c=ii(c,d,a,b,k[10],15,-1051523),b=ii(b,c,d,a,k[1],21,-2054922799),a=ii(a,b,c,d,k[8],6,1873313359),d=ii(d,a,b,c,k[15],10,-30611744),c=ii(c,d,a,b,k[6],15,-1560198380),b=ii(b,c,d,a,k[13],21,1309151649),a=ii(a,b,c,d,k[4],6,-145523070),d=ii(d,a,b,c,k[11],10,-1120210379),c=ii(c,d,a,b,k[2],15,718787259),b=ii(b,c,d,a,k[9],21,-343485551),x[0]=add32(a,x[0]),x[1]=add32(b,x[1]),x[2]=add32(c,x[2]),x[3]=add32(d,x[3])},cmn=function(q,a,b,x,s,t){return a=add32(add32(a,q),add32(x,t)),add32(a<<s|a>>>32-s,b)},ff=function(a,b,c,d,x,s,t){return cmn(b&c|~b&d,a,b,x,s,t)},gg=function(a,b,c,d,x,s,t){return cmn(b&d|c&~d,a,b,x,s,t)},hh=function(a,b,c,d,x,s,t){return cmn(b^c^d,a,b,x,s,t)},ii=function(a,b,c,d,x,s,t){return cmn(c^(b|~d),a,b,x,s,t)},md5blk=function(s){var i,md5blks=[];for(i=0;64>i;i+=4)md5blks[i>>2]=s.charCodeAt(i)+(s.charCodeAt(i+1)<<8)+(s.charCodeAt(i+2)<<16)+(s.charCodeAt(i+3)<<24);return md5blks},hex_chr="0123456789abcdef".split(""),rhex=function(n){for(var s="",j=0;4>j;j++)s+=hex_chr[n>>8*j+4&15]+hex_chr[n>>8*j&15];return s},add32=function(a,b){return a+b&4294967295};return function(x){for(var i=0;i<x.length;++i)x[i]=rhex(x[i]);return x.join("")}(function(s){txt="";var i,n=s.length,state=[1732584193,-271733879,-1732584194,271733878];for(i=64;i<=s.length;i+=64)md5cycle(state,md5blk(s.substring(i-64,i)));s=s.substring(i-64);var tail=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(i=0;i<s.length;++i)tail[i>>2]|=s.charCodeAt(i)<<(i%4<<3);if(tail[i>>2]|=128<<(i%4<<3),55<i)for(md5cycle(state,tail),i=0;16>i;++i)tail[i]=0;return tail[14]=8*n,md5cycle(state,tail),state}(str))}Vue.directive("form",{id:"form",priority:999999,inserted:function(el,binding,vnode){if(_isForm(el))return el.getAttribute("novalidate")||el.setAttribute("novalidate",!0),el.__blobForm__={changed:!1,touched:!1,valid:!0,fieldCount:0,errors:{},$lock:!1},new MutationObserver(_debounce(function(){Vue.nextTick(function(){el.__blobForm__.$lock||_getFields.call(vnode.context,el)})},50)).observe(el,{childList:!0,subtree:!0}),el.addEventListener("input",_debounce(function(e){Vue.nextTick(function(){"SELECT"!==e.target.tagName&&!1!==_isField(e.target)&&_validateField.call(vnode.context,el,e.target,!0)})},100)),el.addEventListener("change",_debounce(function(e){Vue.nextTick(function(){"SELECT"===e.target.tagName&&!1!==_isField(e.target)&&setTimeout(function(){_validateField.call(vnode.context,el,e.target,!0)},50)})},100)),vnode.context.$forceUpdate(),Vue.nextTick(function(){_getFields.call(vnode.context,el),Vue.nextTick(function(){_validateForm.call(vnode.context,el)})}),!0}}),Vue.directive("gravatar",{id:"gravatar",priority:5e4,inserted:function(el,binding){if(el.nodeName&&"INPUT"===el.nodeName&&"email"===el.getAttribute("type")){let size=parseInt(binding.value,10)||0;0>=size&&(size=80);const updateEmail=_debounce(function(){let email=(el.value||"").trim().toLowerCase(),hash="334c4a4c42fdb79d7ebc3e73b517e6f8",oldHash=el.dataset.hash||"";email&&regexEmail.test(email)&&(hash=_md5(email)),hash!==oldHash&&(el.setAttribute("data-hash",hash),el.style.backgroundImage="url("+gravatar+hash+"?s="+size+"&d=blank)")},500);Vue.nextTick(function(){el.addEventListener("input",updateEmail),updateEmail()})}}}),Vue.directive("phone",{id:"phone",priority:5e4,inserted:function(el,binding,vnode){if(!el.nodeName||"INPUT"!==el.nodeName||"tel"!==el.getAttribute("type"))return;if(!("blobPhone"in window))return void console.warn("v-phone requires the blob-phone Javascript library.\nhttps://github.com/Blobfolio/blob-phone#javascript");let defaultCountry=(binding.value||"").toUpperCase()||"US";2!==defaultCountry.length&&(defaultCountry="US");const updatePhone=_debounce(function(){let value=(el.value||"").trim(),valueNew="",valid=!1,country=el.dataset.country||"",countryNew="";if(value.length){let parsed=blobPhone.parse(value,defaultCountry);if(!1!==parsed&&(valueNew=parsed.number,countryNew=parsed.country,valid=!0,parsed.number===el.dataset.blobPhoneValue&&country===countryNew))return}if(valid){if(value!==valueNew){let model=_getModelName(vnode);model=("vnode.context."+model).split(".");let modelTop=model.pop();model=eval(model.join(".")),Vue.set(model,modelTop,valueNew),value=valueNew,vnode.context.$forceUpdate()}country!==countryNew&&el.setAttribute("data-country",countryNew)}else country&&el.setAttribute("data-country","");el.dataset.blobPhoneValue!==value&&el.setAttribute("data-blob-phone-value",value),valid=valid?1:0;let lastValid=parseInt(el.dataset.blobPhoneValid,10)||0;valid!==lastValid&&el.setAttribute("data-blob-phone-valid",valid)},2e3);Vue.nextTick(function(){el.addEventListener("input",updatePhone),Vue.nextTick(function(){updatePhone()})})}}),Vue.directive("blobselect",{id:"blobselect",priority:5e4,inserted:function(el,binding){if(!el.nodeName||"SELECT"!==el.nodeName)return;if(!("blobSelect"in HTMLSelectElement.prototype))return void console.warn("v-blobselect requires the blob-select Javascript library.\nhttps://github.com/Blobfolio/blob-select");let args=binding.value||null;"object"!=typeof args&&(args=null),Vue.nextTick(function(){el.blobSelect.init(args)})}}),Vue.prototype.formErrors=function(name,fieldName){const el=_getFormByName(name);if(!el)return!1;const errorKeys=Object.keys(el.__blobForm__.errors);return!!errorKeys.length&&(fieldName?-1!==errorKeys.indexOf(fieldName)&&el.__blobForm__.errors[fieldName]:el.__blobForm__.errors)},Vue.prototype.formOtherErrors=function(name){const el=_getFormByName(name);if(!el)return!1;const errorKeys=Object.keys(el.__blobForm__.errors);if(!errorKeys.length)return!1;const fields=_getFields.call(this,el),fieldKeys=[];for(let i=0;i<fields.length;++i){const fieldName=fields[i].getAttribute("name")||"";fieldName&&fieldKeys.push(fieldName)}let out={},found=!1;for(let i=0;i<errorKeys.length;++i)-1===fieldKeys.indexOf(errorKeys[i])&&(out[errorKeys[i]]=el.__blobForm__.errors[errorKeys[i]],found=!0);return!!found&&out},Vue.prototype.formTouched=function(name,fieldName){const el=_getFormByName(name);if(!el)return!1;if(fieldName){const fieldEl=_getFormFieldByName.call(this,el,fieldName);return fieldEl&&fieldEl.__blobForm__.touched}return el.__blobForm__.touched},Vue.prototype.formChanged=function(name,fieldName){const el=_getFormByName(name);if(!el)return!1;if(fieldName){const fieldEl=_getFormFieldByName.call(this,el,fieldName);return fieldEl&&fieldEl.__blobForm__.changed}return el.__blobForm__.changed},Vue.prototype.formValid=function(name,fieldName){const el=_getFormByName(name);if(!el)return!1;if(fieldName){const fieldEl=_getFormFieldByName.call(this,el,fieldName);return fieldEl&&fieldEl.__blobForm__.valid}return el.__blobForm__.valid},Vue.prototype.validateForm=function(name){const el=_getFormByName(name);return el?(_validateForm.call(this,el,!0),!Object.keys(el.__blobForm__.errors).length||el.__blobForm__.errors):(console.warn("Invalid vue-blob-form: ",name),!1)},Vue.prototype.setFormErrors=function(name,errors){const el=_getFormByName(name);if(!el)return console.warn("Invalid vue-blob-form: ",name),!1;if("object"!=typeof errors||null===errors||Array.isArray(errors))return!1;const errorKeys=Object.keys(errors);let changed=!1;if(!errorKeys.length)return!1;for(let i=0;i<errorKeys.length;++i)errors[errorKeys[i]]&&"string"==typeof errors[errorKeys[i]]&&(el.__blobForm__.errors[errorKeys[i]]=errors[errorKeys[i]],changed=!0);if(changed){const fields=_getFields.call(this,el);for(let i=0;i<fields.length;++i){let fieldName=fields[i].getAttribute("name")||"";fieldName&&"string"==typeof el.__blobForm__.errors[fieldName]&&fields[i].__blobForm__.valid&&(fields[i].__blobForm__.valid=!1,fields[i].setCustomValidity(el.__blobForm__.errors[fieldName]),_toggleClasses(fields[i],["is-valid","is:valid"],["is-invalid","is:invalid"],!1))}this.$forceUpdate();let vue=this;Vue.nextTick(function(){_updateFormClasses.call(vue,el)})}return!0},Vue.prototype.clearFormErrors=function(name){const el=_getFormByName(name);if(!el)return console.warn("Invalid vue-blob-form: ",name),!1;el.__blobForm__.errors={};const fields=_getFields.call(this,el);for(let i=0;i<fields.length;++i)fields[i].__blobForm__.valid||(fields[i].__blobForm__.valid=!0,fields[i].setCustomValidity(""),_toggleClasses(fields[i],["is-valid","is:valid"],["is-invalid","is:invalid"],!0));this.$forceUpdate();let vue=this;return Vue.nextTick(function(){_updateFormClasses.call(vue,el)}),!0},Vue.prototype.gravatarURL=function(email,size){email=(email=email?email+"":"").trim().toLowerCase(),0>=(size=parseInt(size,10)||0)&&(size=80);let hash="334c4a4c42fdb79d7ebc3e73b517e6f8";return email&&regexEmail.test(email)&&(hash=_md5(email)),gravatar+hash+"?s="+size+"&d=blank"},Vue.mixin({filters:{phone:function(phone,country){if(!("blobPhone"in window))return console.warn("This filter requires the blob-phone Javascript library.\nhttps://github.com/Blobfolio/blob-phone#javascript"),phone;const parsed=blobPhone.parse(phone,country);return!1!==parsed?parsed.number:phone}}});const _debounce=function(fn,wait,no_postpone){let args,context,result,timeout,executed=!0;function ping(){result=fn.apply(context||this,args||[]),context=args=null,executed=!0}function cancel(){timeout&&(clearTimeout(timeout),timeout=null)}function wrapper(){context=this,args=arguments,no_postpone?executed&&(executed=!1,timeout=setTimeout(ping,wait)):(cancel(),timeout=setTimeout(ping,wait))}return wrapper.cancel=cancel,wrapper};function _getModelName(vnode){try{return vnode.data.directives.find(function(o){return"model"===o.name}).expression}catch(Ex){return!1}}}};"undefined"!=typeof window&&window.Vue&&window.Vue.use(BlobFormsVue)}();