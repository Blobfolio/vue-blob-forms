!function(){var BlobFormsVue={};BlobFormsVue.install=function(Vue,options){function _validateForm(el,touch){var name=_isForm(el);if(!name||!this.blobForms[name]||this.blobForms[name].$lock)return!1;Vue.set(this.blobForms[name],"$lock",!0),touch=!!touch,this.blobErrors[name]={};var fieldKeys=Object.keys(this.blobFields[name]);for(i=0;i<fieldKeys.length;i++)_validateField.call(this,el,this.blobFields[name][fieldKeys[i]].el,touch);Vue.set(this.blobForms[name],"$lock",!1);var vue=this;return Vue.nextTick(function(){_updateFormClasses.call(vue,el)}),!0}function _validateField(form,field,touch){var name=_isForm(form);if(!name||!this.blobFields[name])return!1;var fieldName=_isField(field);if(!field)return!1;if(void 0===this.blobFields[name][fieldName]&&(console.warn("Missing Field Data: "+name+"."+fieldName),Vue.set(this.blobFields[name],fieldName,{name:fieldName,el:field,originalValue:_checksum(field.value),changed:!1,touched:!1,valid:!0,$lock:!1}),this.$forceUpdate()),this.blobFields[name][fieldName].$lock)return!1;touch=!!touch;var fieldValue=field.value||"";Vue.set(this.blobFields[name][fieldName],"$lock",!0),touch&&!this.blobFields[name][fieldName].touched&&Vue.set(this.blobFields[name][fieldName],"touched",!0);var changed=_checksum(fieldValue)!==this.blobFields[name][fieldName].originalValue;changed!==this.blobFields[name][fieldName].changed&&Vue.set(this.blobFields[name][fieldName],"changed",changed);var valid=!1;if(_resetValidity(field),void 0===field.willValidate||field.checkValidity()?valid=!0:this.blobFields[name][fieldName].touched||field.validity.valueMissing&&(valid=!0,_resetValidity(field)),fieldValue.length&&valid&&"email"===field.getAttribute("type")&&((valid=!!regexEmail.test(fieldValue))||field.setCustomValidity("Please enter a complete email address.")),"blobPhone"in window&&fieldValue.length&&valid&&"tel"===field.getAttribute("type")){var lastValue=field.dataset.blobPhoneValue||"",lastValid=parseInt(field.dataset.blobPhoneValid,10)||0;if(lastValue!==fieldValue){var country=(field.dataset.country||"").toUpperCase()||"US";2!==country.length&&(country="US"),!1!==blobPhone.parse(fieldValue,country)?(field.setAttribute("data-blob-phone-value",fieldValue),field.setAttribute("data-blob-phone-valid",1)):(field.setAttribute("data-blob-phone-value",fieldValue),field.setAttribute("data-blob-phone-valid",0),valid=!1)}else valid=1===lastValid;valid||field.setCustomValidity("Please enter a valid phone number.")}if(valid){var fieldCallback=field.dataset.validationCallback||field.getAttribute("validation-callback")||!1;if(fieldCallback&&"function"==typeof this[fieldCallback]){var callbackResponse=this[fieldCallback](fieldValue);!0!==callbackResponse&&(valid=!1,"string"==typeof callbackResponse&&callbackResponse.length?field.setCustomValidity(callbackResponse):field.setCustomValidity("This input is not valid."))}}if(valid?(_resetValidity(field),this.blobErrors[name][fieldName]&&Vue.delete(this.blobErrors[name],fieldName)):Vue.set(this.blobErrors[name],fieldName,field.validationMessage),valid!==this.blobFields[name][fieldName].valid&&Vue.set(this.blobFields[name][fieldName],"valid",valid),_toggleClasses(field,["is-valid","is:valid"],["is-invalid","is:invalid"],this.blobFields[name][fieldName].valid),_toggleClasses(field,["is-touched","is:touched"],[],this.blobFields[name][fieldName].touched),_toggleClasses(field,["is-changed","is:changed"],[],this.blobFields[name][fieldName].changed),Vue.set(this.blobFields[name][fieldName],"$lock",!1),!this.blobForms[name].$lock){var vue=this;Vue.nextTick(function(){_updateFormClasses.call(vue,form)})}return valid}function _resetValidity(el){try{el.checkValidity(),el.setCustomValidity("")}catch(Ex){return!1}}function _updateFormClasses(el){var name=_isForm(el);if(!name)return!1;var changed=!1,valid=!0,touched=!1,fields=Object.keys(this.blobFields[name]);for(i=0;i<fields.length&&(!changed&&this.blobFields[name][fields[i]].changed&&(changed=!0),valid&&!this.blobFields[name][fields[i]].valid&&(valid=!1),!touched&&this.blobFields[name][fields[i]].touched&&(touched=!0),!changed||valid||!touched);i++);valid!==this.blobForms[name].valid&&Vue.set(this.blobForms[name],"valid",valid),changed!==this.blobForms[name].changed&&Vue.set(this.blobForms[name],"changed",changed),touched!==this.blobForms[name].touched&&Vue.set(this.blobForms[name],"touched",touched),_toggleClasses(el,["is-valid","is:valid"],["is-invalid","is:invalid"],valid),_toggleClasses(el,["is-touched","is:touched"],[],touched),_toggleClasses(el,["is-changed","is:changed"],[],changed),this.$forceUpdate()}function _isForm(el){return!(!el.nodeName||"FORM"!==el.nodeName||!el.getAttribute("name"))&&el.getAttribute("name")}function _isField(el){return!(!el.nodeName||"INPUT"!==el.nodeName&&"SELECT"!==el.nodeName&&"TEXTAREA"!==el.nodeName||el.disabled||!el.getAttribute("name")||"button"===el.getAttribute("type")||"submit"===el.getAttribute("type")||"reset"===el.getAttribute("type"))&&el.getAttribute("name")}function _getFields(el){if(!1===_isForm(el))return!1;for(var out=[],i=0;i<el.elements.length;i++)_isField(el.elements[i])&&out.push(el.elements[i]);return!!out.length&&out}function _loadFields(el,updateClasses){var name=_isForm(el);if(!1===name)return!1;var fields=_getFields(el);if(!1===fields)return Vue.set(this.blobForms[name],"fields",{}),Vue.set(this.blobFields,"name",{}),Vue.set(this.blobErrors,"name",{}),!1;var changed=!1,fieldNames=[],fieldKeys=Object.keys(this.blobFields[name]),errorKeys=Object.keys(this.blobFields[name]);for(i=0;i<fields.length;i++){var fieldName=fields[i].getAttribute("name");if(fieldName){if(-1===fieldKeys.indexOf(fieldName)){changed=!0,fieldKeys.push(fieldName),Vue.set(this.blobFields[name],fieldName,{name:fieldName,el:fields[i],originalValue:_checksum(fields[i].value||""),changed:!1,touched:!1,valid:!0,$lock:!1});vue=this;fields[i].addEventListener("blur",function(e){Vue.nextTick(function(){_validateField.call(vue,el,e.target,!0)})})}fieldNames.push(fieldName)}}for(i=0;i<fieldKeys.length;i++)if(-1===fieldNames.indexOf(fieldKeys[i])){changed=!0;try{var fieldEvents=getEventListeners(this.blobFields[name].el);for(j=0;j<fieldEvents.length;j++)fieldEvents[j].remove()}catch(Ex){}Vue.delete(this.blobFields[name],fieldKeys[i]),-1===errorKeys.indexOf(fieldKeys[i])&&(changed=!0,Vue.delete(this.blobFields[name],fieldKeys[i]))}if(changed&&(this.$forceUpdate(),updateClasses)){var vue=this;Vue.nextTick(function(){_updateFormClasses.call(vue,el)})}return!0}function _toggleClasses(el,good,bad,test){if(!el.getAttribute("name"))return!1;if("string"==typeof good&&(good=good.split(" ")),!Array.isArray(good))return!1;if("string"==typeof bad&&(bad=bad.split(" ")),!Array.isArray(bad))return!1;test=!!test;var i,hasClass;for(i=0;i<good.length;i++)good[i]&&(hasClass=el.classList.contains(good[i]),test&&!hasClass?el.classList.add(good[i]):!test&&hasClass&&el.classList.remove(good[i]));for(i=0;i<bad.length;i++)bad[i]&&(hasClass=el.classList.contains(bad[i]),test||hasClass?test&&hasClass&&el.classList.remove(bad[i]):el.classList.add(bad[i]));return!0}function _checksum(value){if("object"==typeof value)try{value=JSON.stringify(value)}catch(Ex){return 0}else try{value+=""}catch(Ex){return 0}var i,hash=0,strlen=value.length;for(i=0;i<strlen;i++)hash=(hash<<5)-hash+value.charCodeAt(i),hash&=hash;return hash}function _md5(str){var md5cycle=function(x,k){var a=x[0],b=x[1],c=x[2],d=x[3];a=ff(a,b,c,d,k[0],7,-680876936),d=ff(d,a,b,c,k[1],12,-389564586),c=ff(c,d,a,b,k[2],17,606105819),b=ff(b,c,d,a,k[3],22,-1044525330),a=ff(a,b,c,d,k[4],7,-176418897),d=ff(d,a,b,c,k[5],12,1200080426),c=ff(c,d,a,b,k[6],17,-1473231341),b=ff(b,c,d,a,k[7],22,-45705983),a=ff(a,b,c,d,k[8],7,1770035416),d=ff(d,a,b,c,k[9],12,-1958414417),c=ff(c,d,a,b,k[10],17,-42063),b=ff(b,c,d,a,k[11],22,-1990404162),a=ff(a,b,c,d,k[12],7,1804603682),d=ff(d,a,b,c,k[13],12,-40341101),c=ff(c,d,a,b,k[14],17,-1502002290),b=ff(b,c,d,a,k[15],22,1236535329),a=gg(a,b,c,d,k[1],5,-165796510),d=gg(d,a,b,c,k[6],9,-1069501632),c=gg(c,d,a,b,k[11],14,643717713),b=gg(b,c,d,a,k[0],20,-373897302),a=gg(a,b,c,d,k[5],5,-701558691),d=gg(d,a,b,c,k[10],9,38016083),c=gg(c,d,a,b,k[15],14,-660478335),b=gg(b,c,d,a,k[4],20,-405537848),a=gg(a,b,c,d,k[9],5,568446438),d=gg(d,a,b,c,k[14],9,-1019803690),c=gg(c,d,a,b,k[3],14,-187363961),b=gg(b,c,d,a,k[8],20,1163531501),a=gg(a,b,c,d,k[13],5,-1444681467),d=gg(d,a,b,c,k[2],9,-51403784),c=gg(c,d,a,b,k[7],14,1735328473),b=gg(b,c,d,a,k[12],20,-1926607734),a=hh(a,b,c,d,k[5],4,-378558),d=hh(d,a,b,c,k[8],11,-2022574463),c=hh(c,d,a,b,k[11],16,1839030562),b=hh(b,c,d,a,k[14],23,-35309556),a=hh(a,b,c,d,k[1],4,-1530992060),d=hh(d,a,b,c,k[4],11,1272893353),c=hh(c,d,a,b,k[7],16,-155497632),b=hh(b,c,d,a,k[10],23,-1094730640),a=hh(a,b,c,d,k[13],4,681279174),d=hh(d,a,b,c,k[0],11,-358537222),c=hh(c,d,a,b,k[3],16,-722521979),b=hh(b,c,d,a,k[6],23,76029189),a=hh(a,b,c,d,k[9],4,-640364487),d=hh(d,a,b,c,k[12],11,-421815835),c=hh(c,d,a,b,k[15],16,530742520),b=hh(b,c,d,a,k[2],23,-995338651),a=ii(a,b,c,d,k[0],6,-198630844),d=ii(d,a,b,c,k[7],10,1126891415),c=ii(c,d,a,b,k[14],15,-1416354905),b=ii(b,c,d,a,k[5],21,-57434055),a=ii(a,b,c,d,k[12],6,1700485571),d=ii(d,a,b,c,k[3],10,-1894986606),c=ii(c,d,a,b,k[10],15,-1051523),b=ii(b,c,d,a,k[1],21,-2054922799),a=ii(a,b,c,d,k[8],6,1873313359),d=ii(d,a,b,c,k[15],10,-30611744),c=ii(c,d,a,b,k[6],15,-1560198380),b=ii(b,c,d,a,k[13],21,1309151649),a=ii(a,b,c,d,k[4],6,-145523070),d=ii(d,a,b,c,k[11],10,-1120210379),c=ii(c,d,a,b,k[2],15,718787259),b=ii(b,c,d,a,k[9],21,-343485551),x[0]=add32(a,x[0]),x[1]=add32(b,x[1]),x[2]=add32(c,x[2]),x[3]=add32(d,x[3])},cmn=function(q,a,b,x,s,t){return a=add32(add32(a,q),add32(x,t)),add32(a<<s|a>>>32-s,b)},ff=function(a,b,c,d,x,s,t){return cmn(b&c|~b&d,a,b,x,s,t)},gg=function(a,b,c,d,x,s,t){return cmn(b&d|c&~d,a,b,x,s,t)},hh=function(a,b,c,d,x,s,t){return cmn(b^c^d,a,b,x,s,t)},ii=function(a,b,c,d,x,s,t){return cmn(c^(b|~d),a,b,x,s,t)},md5blk=function(s){var i,md5blks=[];for(i=0;i<64;i+=4)md5blks[i>>2]=s.charCodeAt(i)+(s.charCodeAt(i+1)<<8)+(s.charCodeAt(i+2)<<16)+(s.charCodeAt(i+3)<<24);return md5blks},hex_chr="0123456789abcdef".split(""),rhex=function(n){for(var s="",j=0;j<4;j++)s+=hex_chr[n>>8*j+4&15]+hex_chr[n>>8*j&15];return s},add32=function(a,b){return a+b&4294967295};return function(x){for(var i=0;i<x.length;i++)x[i]=rhex(x[i]);return x.join("")}(function(s){txt="";var i,n=s.length,state=[1732584193,-271733879,-1732584194,271733878];for(i=64;i<=s.length;i+=64)md5cycle(state,md5blk(s.substring(i-64,i)));s=s.substring(i-64);var tail=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(i=0;i<s.length;i++)tail[i>>2]|=s.charCodeAt(i)<<(i%4<<3);if(tail[i>>2]|=128<<(i%4<<3),i>55)for(md5cycle(state,tail),i=0;i<16;i++)tail[i]=0;return tail[14]=8*n,md5cycle(state,tail),state}(str))}function _getModelName(vnode){try{return vnode.data.directives.find(function(o){return"model"===o.getAttribute("name")}).expression}catch(Ex){return!1}}var regexEmail=new RegExp(/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/);Vue.prototype.blobForms={},Vue.prototype.blobFields={},Vue.prototype.blobErrors={},Vue.directive("form",{id:"form",priority:999999,inserted:function(el,binding,vnode){var name=_isForm(el);if(name)return el.getAttribute("novalidate")||el.setAttribute("novalidate",!0),Vue.set(vnode.context.blobForms,name,{name:name,el:el,changed:!1,touched:!1,valid:!0,$lock:!1}),void 0===vnode.context.blobFields[name]&&Vue.set(vnode.context.blobFields,name,{}),void 0===vnode.context.blobErrors[name]&&Vue.set(vnode.context.blobErrors,name,{}),vnode.context.$forceUpdate(),new MutationObserver(_debounce(function(mutations,instance){Vue.nextTick(function(){_loadFields.call(vnode.context,el,!0)})},50)).observe(el,{childList:!0,subtree:!0}),el.addEventListener("input",_debounce(function(e){Vue.nextTick(function(){"SELECT"!==e.target.tagName&&!1!==_isField(e.target)&&_validateField.call(vnode.context,el,e.target,!0)})},100)),el.addEventListener("change",_debounce(function(e){Vue.nextTick(function(){"SELECT"===e.target.tagName&&!1!==_isField(e.target)&&setTimeout(function(){_validateField.call(vnode.context,el,e.target,!0)},50)})},100)),Vue.nextTick(function(){_loadFields.call(vnode.context,el),Vue.nextTick(function(){_validateForm.call(vnode.context,el)})}),!0}}),Vue.directive("gravatar",{id:"gravatar",priority:5e4,inserted:function(el,binding,vnode){if(el.nodeName&&"INPUT"===el.nodeName&&"email"===el.getAttribute("type")){var size=parseInt(binding.value,10)||0;size<=0&&(size=80);var updateEmail=_debounce(function(){var email=(el.value||"").trim().toLowerCase(),hash="334c4a4c42fdb79d7ebc3e73b517e6f8",oldHash=el.dataset.hash||"";email&&regexEmail.test(email)&&(hash=_md5(email)),hash!==oldHash&&(el.setAttribute("data-hash",hash),el.style.backgroundImage="url(https://www.gravatar.com/avatar/"+hash+"?s="+size+"&d=blank)")},500);Vue.nextTick(function(){el.addEventListener("input",updateEmail),updateEmail()})}}}),Vue.directive("phone",{id:"phone",priority:5e4,inserted:function(el,binding,vnode){if(el.nodeName&&"INPUT"===el.nodeName&&"tel"===el.getAttribute("type"))if("blobPhone"in window){var defaultCountry=(binding.value||"").toUpperCase()||"US";2!==defaultCountry.length&&(defaultCountry="US");var updatePhone=_debounce(function(){var value=(el.value||"").trim(),valueNew="",valid=!1,country=el.dataset.country||"",countryNew="";if(value.length){var parsed=blobPhone.parse(value,defaultCountry);if(!1!==parsed&&(valueNew=parsed.number,countryNew=parsed.country,valid=!0,parsed.number===el.dataset.blobPhoneValue&&country===countryNew))return}if(valid){if(value!==valueNew){var model=_getModelName(vnode);model=("vnode.context."+model).split(".");var modelTop=model.pop();model=eval(model.join(".")),Vue.set(model,modelTop,valueNew),value=valueNew,vnode.context.$forceUpdate()}country!==countryNew&&el.setAttribute("data-country",countryNew)}else country&&el.setAttribute("data-country","");el.dataset.blobPhoneValue!==value&&el.setAttribute("data-blob-phone-value",value),valid=valid?1:0;var lastValid=parseInt(el.dataset.blobPhoneValid,10)||0;valid!==lastValid&&el.setAttribute("data-blob-phone-valid",valid)},500);Vue.nextTick(function(){el.addEventListener("input",updatePhone),Vue.nextTick(function(){updatePhone()})})}else console.warn("v-phone requires the blob-phone Javascript library.\nhttps://github.com/Blobfolio/blob-phone#javascript")}}),Vue.directive("blobselect",{id:"blobselect",priority:5e4,inserted:function(el,binding){if(el.nodeName&&"SELECT"===el.nodeName)if("blobSelect"in HTMLSelectElement.prototype){var args=binding.value||null;"object"!=typeof args&&(args=null),Vue.nextTick(function(){el.blobSelect.init(args)})}else console.warn("v-blobselect requires the blob-select Javascript library.\nhttps://github.com/Blobfolio/blob-select")}}),Vue.prototype.formErrors=function(name,fieldName){if(!name||void 0===this.blobForms[name])return!1;var errors=this.blobErrors[name]||{},errorKeys=Object.keys(errors);return!!errorKeys.length&&(fieldName?-1!==errorKeys.indexOf(fieldName)&&errors[fieldName]:errors)},Vue.prototype.formTouched=function(name,fieldName){return!(!name||void 0===this.blobForms[name])&&(fieldName?this.blobFields[name][fieldName]&&this.blobFields[name][fieldName].touched:this.blobForms[name].touched)},Vue.prototype.formChanged=function(name,fieldName){return!(!name||void 0===this.blobForms[name])&&(fieldName?this.blobFields[name][fieldName]&&this.blobFields[name][fieldName].changed:this.blobForms[name].changed)},Vue.prototype.formValid=function(name,fieldName){return!(!name||void 0===this.blobForms[name])&&(fieldName?this.blobFields[name][fieldName]&&this.blobFields[name][fieldName].valid:this.blobForms[name].valid)},Vue.prototype.validateForm=function(name){if(!name||void 0===this.blobForms[name])return{other:"Invalid form."};_validateForm.call(this,this.blobForms[name].el,!0);var errors=this.blobErrors[name]||{};return!Object.keys(errors).length||errors},Vue.prototype.setFormErrors=function(name,errors){if(!name||void 0===this.blobErrors[name])return!1;if("object"!=typeof errors||null===errors||Array.isArray(errors))return!1;var fields=Object.keys(this.blobFields[name]),keys=Object.keys(errors),changed=!1;if(!keys.length)return!1;for(i=0;i<keys.length;i++){var key=keys[i],value=errors[keys[i]];value&&"string"==typeof value&&(changed=!0,this.blobErrors[name][key]=value,-1!==fields.indexOf(key)&&(this.blobFields[name][key].valid&&Vue.set(this.blobFields[name][key],"valid",!1),this.blobFields[name][key].el.classList.contains("is-valid")&&this.blobFields[name][key].el.classList.remove("is-valid"),this.blobFields[name][key].el.classList.contains("is-invalid")||this.blobFields[name][key].el.classList.add("is-invalid"),this.blobFields[name][key].el.setCustomValidity(value)))}return changed&&(this.$forceUpdate(),_updateFormClasses.call(this,this.blobForms[name].el)),!0},Vue.prototype.gravatarURL=function(email,size){email=(email=email?email+"":"").trim().toLowerCase(),(size=parseInt(size,10)||0)<=0&&(size=80);var hash="334c4a4c42fdb79d7ebc3e73b517e6f8";return email&&regexEmail.test(email)&&(hash=_md5(email)),gravatar+hash+"?s="+size+"&d=blank"},Vue.mixin({filters:{phone:function(phone,country){if(!("blobPhone"in window))return console.warn("This filter requires the blob-phone Javascript library.\nhttps://github.com/Blobfolio/blob-phone#javascript"),phone;var parsed=blobPhone.parse(phone,country);return!1!==parsed?parsed.number:phone}}});var _debounce=function(fn,wait,no_postpone){function ping(){result=fn.apply(context||this,args||[]),context=args=null,executed=!0}function cancel(){timeout&&(clearTimeout(timeout),timeout=null)}function wrapper(){context=this,args=arguments,no_postpone?executed&&(executed=!1,timeout=setTimeout(ping,wait)):(cancel(),timeout=setTimeout(ping,wait))}var args,context,result,timeout,executed=!0;return wrapper.cancel=cancel,wrapper}},"undefined"!=typeof window&&window.Vue&&window.Vue.use(BlobFormsVue)}();